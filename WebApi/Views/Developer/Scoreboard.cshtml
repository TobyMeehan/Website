@model WebApi.Models.Application

@{
    ViewData["Title"] = $"{Model.Name} Scoreboard";
    Layout = "~/Views/Shared/_DeveloperLayout.cshtml";
}

<h1>@Model.Name Scoreboard</h1>

<p>Use the scoreboard to persist user-specific data between sessions. Data stored in the scoreboard is not shown anywhere other than where your app displays it, so you can use it for whatever you like.</p>

<form class="form-inline" method="post" action="@($"/Developer/Objective/{Model.Id}")">
    <label class="mr-2" for="ObjectiveName">New Objective</label>

    <input type="text" class="form-control mr-sm-2" id="ObjectiveName" name="name" placeholder="Objective Name" />

    <button type="submit" class="btn btn-primary">Create</button>
</form>

@if (!Model.Scoreboard.Objectives.Any())
{
    <p>Your scoreboard does not have any objectives.</p>
}
else
{
    @foreach (var objective in Model.Scoreboard.Objectives)
    {
        <div class="card my-3">
            <div class="card-header">
                <div class="d-flex justify-content-between">
                    <h5 class="my-auto">@objective.Name</h5>

                    <a asp-action="DeleteObjective" asp-route-appid="@Model.Id" asp-route-objective="@objective.Id" class="btn btn-outline-danger btn-sm">Delete</a>
                </div>
            </div>
            <div class="card-body">
                <table class="table table-hover">
                    <thead class="thead-light">
                        <tr>
                            <th scope="col">User</th>
                            <th scope="col">Score</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var score in Model.Scoreboard.Scores.Where(s => s.Objective.Id == objective.Id))
                        {
                            <tr>
                                <td>
                                    <a href="@($"https://tobymeehan.com/users/{score.User.Username}")">@score.User.Username</a>
                                </td>
                                <td>@score.Value</td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    }
}

@section CustomDevNavItem {
    <li class="nav-item">
        <a asp-action="Scoreboard" class="nav-link active">@Model.Name Scoreboard</a>
    </li>
}
