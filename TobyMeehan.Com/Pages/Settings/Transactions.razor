@page "/me/transactions"
@layout SettingsLayout

<Title>Transactions</Title>

<Card class="my-3">
    <h1>Transactions</h1>
</Card>

<Card class="my-3">
    <p>Balance: @CurrentUser.Balance</p>

    @foreach (var date in CurrentUser.Transactions.OrderByDescending(x => x.Sent).GroupBy(x => x.Sent.Date))
    {
        <Table>
            <Head>
                <tr>
                    <th colspan="4" class="text-center">@date.Key.ToLongDateString()</th>
                </tr>
            </Head>
            <Body>
                @foreach (var transaction in date)
                {
                    <tr>
                        <td>
                            <MiniAppIcon Application="transaction.Application"></MiniAppIcon>
                            @transaction.Application.Name
                        </td>
                        <td>@transaction.Description</td>
                        <td>@transaction.Amount</td>
                        <td>@transaction.Sent.TimeOfDay.Hours:@transaction.Sent.TimeOfDay.Minutes</td>
                    </tr>
                }
            </Body>
        </Table>
    }
</Card>